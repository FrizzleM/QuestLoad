<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QuestLoad</title>

  <style>
    :root{
      color-scheme: dark;

      /* Apple-ish dark glass */
      --bg-0: #050814;
      --bg-1: #0b1020;
      --panel: rgba(255,255,255,.08);
      --panel-2: rgba(255,255,255,.05);
      --border: rgba(255,255,255,.14);
      --border-soft: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted-2: rgba(255,255,255,.55);

      --accent: #7c5cff;
      --accent-2: #49a3ff;
      --good: #22c55e;
      --danger: #ef4444;
      --warn: #fbbf24;

      --radius: 18px;
      --shadow: 0 20px 70px rgba(0,0,0,.55);
      --shadow-soft: 0 8px 24px rgba(0,0,0,.35);
      --ring: 0 0 0 4px rgba(124,92,255,.25);
      --ring-2: 0 0 0 4px rgba(73,163,255,.22);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font: 15px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(900px 500px at 20% 8%, rgba(124,92,255,.25), transparent 58%),
        radial-gradient(900px 500px at 80% 18%, rgba(73,163,255,.18), transparent 60%),
        radial-gradient(800px 600px at 50% 100%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1) 55%, #060915);
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding: 28px 16px 42px;
    }

    a{ color: inherit; }

    .wrap{
      width: min(980px, 100%);
    }

    .hero{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
    }

    .logo{
      width: 42px;
      height: 42px;
      border-radius: 14px;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(16px 16px at 70% 70%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.95), rgba(73,163,255,.85));
      box-shadow: var(--shadow-soft);
      flex: 0 0 auto;
      position: relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute;
      inset:-2px;
      background: linear-gradient(135deg, rgba(255,255,255,.18), transparent 55%);
      transform: rotate(10deg);
    }

    h1{
      margin:0;
      font-size: 22px;
      letter-spacing: .2px;
    }

    .sub{
      margin-top: 4px;
      color: var(--muted);
      max-width: 56ch;
      font-size: 13.5px;
    }

    .meta-pill{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      padding: 8px 10px;
      color: var(--muted);
      font-size: 12.5px;
      white-space: nowrap;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }

    .card{
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border-radius: calc(var(--radius) + 4px);
      box-shadow: var(--shadow);
      overflow: hidden;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    .topbar{
      padding: 14px 16px;
      border-bottom: 1px solid var(--border-soft);
      display:flex;
      gap: 12px;
      align-items:center;
      justify-content: space-between;
    }

    .status{
      color: var(--muted);
      font-size: 13px;
      max-width: 100%;
    }

    .section{
      padding: 18px 16px;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .section:first-of-type{ border-top: none; }

    .rowhead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    .title{
      font-weight: 650;
      letter-spacing: .1px;
      font-size: 14.5px;
      margin-bottom: 4px;
    }
    .desc{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      max-width: 78ch;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }

    button{
      appearance:none;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 600;
      letter-spacing: .1px;
      cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease, opacity .2s ease;
      box-shadow: 0 1px 0 rgba(255,255,255,.06) inset;
    }
    button:hover{ background: rgba(255,255,255,.085); }
    button:active{ transform: translateY(1px); }
    button:focus-visible{ outline:none; box-shadow: var(--ring); }

    button.primary{
      border-color: rgba(124,92,255,.55);
      background: linear-gradient(180deg, rgba(124,92,255,.92), rgba(124,92,255,.70));
      box-shadow: 0 10px 30px rgba(124,92,255,.20);
    }
    button.primary:hover{
      background: linear-gradient(180deg, rgba(124,92,255,.98), rgba(124,92,255,.74));
    }
    button.primary:focus-visible{ box-shadow: var(--ring); }

    button.danger{
      border-color: rgba(239,68,68,.55);
      background: rgba(239,68,68,.14);
    }
    button.danger:hover{ background: rgba(239,68,68,.18); }

    button.mini{
      padding: 8px 10px;
      border-radius: 12px;
      font-size: 12.5px;
      font-weight: 650;
      color: var(--muted);
    }

    button[disabled]{
      opacity: .45;
      cursor: not-allowed;
      transform:none;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }

    .picker{
      border: 1px solid var(--border-soft);
      background: rgba(255,255,255,.04);
      border-radius: 16px;
      padding: 14px;
      box-shadow: 0 1px 0 rgba(255,255,255,.06) inset;
      transition: border-color .2s ease, background .2s ease, box-shadow .2s ease, transform .08s ease;
      cursor:pointer;
      position: relative;
      overflow:hidden;
      user-select:none;
    }
    .picker:hover{
      background: rgba(255,255,255,.055);
      border-color: rgba(255,255,255,.16);
    }
    .picker:active{ transform: translateY(1px); }
    .picker.is-selected{
      border-color: rgba(124,92,255,.55);
      box-shadow: var(--ring), 0 1px 0 rgba(255,255,255,.06) inset;
      background: rgba(124,92,255,.10);
    }
    .picker:focus-visible{
      outline:none;
      box-shadow: var(--ring-2), 0 1px 0 rgba(255,255,255,.06) inset;
    }

    .pick-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .pick-title{
      font-weight: 700;
      letter-spacing:.1px;
      font-size: 14px;
      margin:0;
    }
    .pick-sub{
      color: var(--muted);
      font-size: 12.5px;
      margin-top: 6px;
    }

    .tag{
      display:inline-flex;
      align-items:center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      font-size: 11.5px;
      font-weight: 700;
      letter-spacing: .3px;
      text-transform: uppercase;
      white-space: nowrap;
      flex:0 0 auto;
    }

    .mini-dot{
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.35);
      box-shadow: 0 0 0 2px rgba(255,255,255,.10);
    }
    .picker.is-ready .mini-dot{ background: rgba(34,197,94,.95); box-shadow: 0 0 0 2px rgba(34,197,94,.18); }

    .fileline{
      margin-top: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding-top: 10px;
      border-top: 1px dashed rgba(255,255,255,.10);
      color: var(--muted);
      font-size: 12.5px;
    }
    .fname{
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 70%;
    }
    .fsize{
      color: var(--muted-2);
      white-space: nowrap;
      font-variant-numeric: tabular-nums;
    }

    details{
      margin-top: 14px;
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      overflow:hidden;
      background: rgba(255,255,255,.03);
    }
    summary{
      cursor:pointer;
      padding: 12px 14px;
      list-style:none;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      color: var(--muted);
      font-weight: 650;
      user-select:none;
    }
    summary::-webkit-details-marker{ display:none; }

    pre{
      margin:0;
      padding: 12px 14px 14px;
      border-top: 1px solid rgba(255,255,255,.08);
      max-height: 340px;
      overflow:auto;
      font-size: 12px;
      line-height: 1.45;
      color: rgba(255,255,255,.88);
      background: rgba(0,0,0,.28);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .footer{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-top: 12px;
      color: var(--muted);
      font-size: 12.5px;
      padding: 0 6px;
    }

    .link{
      color: rgba(255,255,255,.88);
      text-decoration: none;
      border-bottom: 1px solid rgba(255,255,255,.25);
      padding-bottom: 1px;
    }
    .link:hover{ border-bottom-color: rgba(255,255,255,.55); }

    .kbd{
      display:inline-block;
      padding: 2px 6px;
      border-radius: 7px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      font-size: 12px;
      color: rgba(255,255,255,.85);
      font-weight: 650;
    }

    @media (max-width: 760px){
      .hero{
        flex-direction: column;
        align-items:flex-start;
      }
      .meta-pill{ align-self:flex-start; }
      .grid{ grid-template-columns: 1fr; }
      .footer{ flex-direction: column; align-items:flex-start; }
      .fname{ max-width: 62%; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; scroll-behavior:auto !important; }
      button:active{ transform:none; }
      .picker:active{ transform:none; }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <div class="hero">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>QuestLoad</h1>
          <div class="sub">
            Install apps and games on Meta Quest with a clear 3-step flow.
            You don’t need to know what sideloading is — just follow the steps.
          </div>
        </div>
      </div>

      <div class="meta-pill" title="This page runs in your browser">
        Runs locally • No sign-in
      </div>
    </div>

    <div class="card">
      <div class="topbar">
        <div class="status" aria-live="polite">
          <span><strong>Tip:</strong> If something looks stuck, open <span class="kbd">Logs</span> below.</span>
        </div>
      </div>

      <!-- STEP 1 -->
      <div class="section" id="step1">
        <div class="rowhead">
          <div>
            <div class="title">1. Connect your Quest</div>
            <p class="desc">
              Plug your Quest into your computer, then click connect. If you see a prompt inside the headset, allow USB access.
            </p>
          </div>
        </div>

        <div class="actions">
          <button id="connect" class="primary" type="button">Connect Quest</button>
          <button id="disconnect" class="danger" type="button">Disconnect</button>
        </div>

        <div class="callout">
          <b>Before you connect:</b> Developer Mode must be enabled in the Meta Quest mobile app.
          Then, when prompted inside the headset, allow USB debugging.
        </div>
      </div>

      <!-- STEP 2 -->
      <div class="section" id="step2">
        <div class="rowhead">
          <div>
            <div class="title">2. Choose what to install</div>
            <p class="desc">
              Pick one option below. You can install a simple app (<b>.apk</b>) or a game folder with extra data (APK + OBB).
            </p>
          </div>
        </div>

        <div class="grid">
          <!-- APK -->
          <div class="picker" id="apkPick" role="button" tabindex="0" aria-label="Select APK option">
            <div class="pick-top">
              <div>
                <p class="pick-title">App (.apk)</p>
                <div class="pick-sub">Most installs use a single file.</div>
              </div>
              <div class="tag" aria-label="APK selected status">
                <span class="mini-dot" aria-hidden="true"></span><span>APK</span>
              </div>
              <input type="file" id="apk" accept=".apk" style="display:none">
            </div>

            <div class="fileline">
              <div class="fname" id="apkName">No file selected</div>
              <div class="fsize" id="apkSize">—</div>
            </div>
          </div>

          <!-- BUNDLE -->
          <div class="picker" id="bundlePick" role="button" tabindex="0" aria-label="Select game folder option">
            <div class="pick-top">
              <div>
                <p class="pick-title">Game folder</p>
                <div class="pick-sub">For games that come as a folder (APK + OBB files).</div>
              </div>
              <div class="tag" aria-label="Folder selected status">
                <span class="mini-dot" aria-hidden="true"></span><span>FOLDER</span>
              </div>
              <input type="file" id="bundle" webkitdirectory multiple style="display:none">
            </div>

            <div class="fileline">
              <div class="fname" id="bundleName">No folder selected</div>
              <div class="fsize" id="bundleSize">—</div>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 3 -->
      <div class="section" id="step3">
        <div class="rowhead">
          <div>
            <div class="title">3. Install</div>
            <p class="desc">
              Install is enabled as soon as you select a file. You can still switch choices anytime.
            </p>
          </div>
        </div>

        <div class="actions">
          <button id="install" type="button" disabled>Install App (.apk)</button>
          <button id="installBundle" class="primary" type="button" disabled>Install Game Folder</button>
        </div>

        <details>
          <summary>
            <span>Logs</span>
            <span style="display:flex; gap:8px; align-items:center;">
              <button id="copyLogs" class="mini" type="button">Copy</button>
              <button id="clearLogs" class="mini" type="button">Clear</button>
            </span>
          </summary>
          <pre id="log"></pre>
        </details>
      </div>
    </div>

    <div class="footer">
      <div>
        An <a class="link" href="https://github.com/FrizzleM/QuestLoad/tree/main/quest-web-installer" target="_blank" rel="noopener noreferrer">open source</a> tool. Made by Frizzle.
      </div>
      <div><a class="link" href="#" id="openHelp">Troubleshooting</a></div>
    </div>

    <!-- Keep backend code untouched -->
    <script type="module" src="/src/main.ts"></script>

    <!-- UI-only helpers (no backend changes) -->
    <script>
      (function(){
        const $ = (id)=>document.getElementById(id);

        const apkPick = $("apkPick");
        const bundlePick = $("bundlePick");
        const apk = $("apk");
        const bundle = $("bundle");
        const apkName = $("apkName");
        const apkSize = $("apkSize");
        const bundleName = $("bundleName");
        const bundleSize = $("bundleSize");

        const install = $("install");
        const installBundle = $("installBundle");

        const copyLogs = $("copyLogs");
        const clearLogs = $("clearLogs");
        const log = $("log");

        // Select picker behavior
        function select(mode){
          const isApk = mode === "apk";
          apkPick.classList.toggle("is-selected", isApk);
          bundlePick.classList.toggle("is-selected", !isApk);
        }

        function humanBytes(n){
          if (!Number.isFinite(n)) return "—";
          const units = ["B","KB","MB","GB"];
          let u = 0, v = n;
          while (v >= 1024 && u < units.length - 1){ v /= 1024; u++; }
          return `${v.toFixed(u === 0 ? 0 : 1)} ${units[u]}`;
        }

        function setReady(el, ready){
          el.classList.toggle("is-ready", !!ready);
        }

        // Click pickers -> open file chooser
        apkPick.addEventListener("click", ()=>{ select("apk"); apk.click(); });
        bundlePick.addEventListener("click", ()=>{ select("bundle"); bundle.click(); });

        // Keyboard accessibility
        apkPick.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); apkPick.click(); }});
        bundlePick.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); bundlePick.click(); }});

        // File change handlers
        apk.addEventListener("change", ()=>{
          const f = apk.files && apk.files[0];
          apkName.textContent = f ? f.name : "No file selected";
          apkSize.textContent = f ? humanBytes(f.size) : "—";
          setReady(apkPick, !!f);

          install.disabled = !f;
          // If APK selected, keep bundle install disabled unless folder has files
          if(f) select("apk");
        });

        bundle.addEventListener("change", ()=>{
          const files = bundle.files ? Array.from(bundle.files) : [];
          const count = files.length;
          const bytes = files.reduce((s,f)=>s+(f.size||0), 0);

          bundleName.textContent = count ? `${count} files selected` : "No folder selected";
          bundleSize.textContent = count ? humanBytes(bytes) : "—";
          setReady(bundlePick, count > 0);

          installBundle.disabled = !(count > 0);
          if(count) select("bundle");
        });

        // Copy / Clear logs (UI-only)
        if(copyLogs){
          copyLogs.addEventListener("click", async (e)=>{
            e.preventDefault();
            try{
              const text = log ? (log.textContent || "") : "";
              await navigator.clipboard.writeText(text);
              copyLogs.textContent = "Copied";
              setTimeout(()=>copyLogs.textContent="Copy", 900);
            }catch{
              copyLogs.textContent = "Failed";
              setTimeout(()=>copyLogs.textContent="Copy", 900);
            }
          });
        }

        if(clearLogs){
          clearLogs.addEventListener("click", (e)=>{
            e.preventDefault();
            if(log) log.textContent = "";
          });
        }

        // Default selection
        select("apk");
      })();
    </script>
  </main>
</body>
</html>
```
